<a [routerLink]="[ '/finance/billing-note']" class="float">
  <i class="fa fa-arrow-left my-float"></i>
</a>
<a [routerLink]="[ '/dashboard/dashboard1']" class="float-home">
  <i class="fa fa-home my-float-home"></i>
</a>
<br>
<div class="row">
  <div class="col-12">
      <div id="form-container">
          <dx-form id="AROperation" itemType="group" [colCount]="3" accept-charset="UTF-8">
              <dxi-item itemType="group" dataField="BN Operation">
                  <dx-select-box #selectBoxSO [dataSource]="['Print Order']" [value]=""></dx-select-box>
              </dxi-item>
              <dxi-item itemType="group" [editorOptions]="{ elementAttr:{ 'class': 'font-for-formlable' } }">
                  <dx-button icon="spinright" type="default" text="GO" (onClick)="BNLineOperationsGo(selectBoxSO.text)">
                  </dx-button>
              </dxi-item>
          </dx-form>
      </div>
  </div>
</div>
<br>
<br>
<div id="form-container">
  <dx-form id="CustomerDetailsGropu" itemType="group" (onFieldDataChanged)="formSummary_fieldDataChanged($event)"
    [colCount]="3" [formData]="headerDetails" accept-charset="UTF-8">
    <dxi-item itemType="group">
      <dxi-item cssClass="font-for-formlable" dataField="DocumentNo"
        [editorOptions]="{ readOnly: true, elementAttr:{ 'class': 'font-for-formlable' } }"></dxi-item>
      <dxi-item cssClass="font-for-formlable" dataField="DocumentDate" editorType="dxDateBox"
        [editorOptions]="{ value: null, width: '100%', displayFormat: 'dd-MM-yyyy',elementAttr:{ 'class': 'font-for-formlable' } }">
      </dxi-item>
      <dxi-item cssClass="font-for-formlable" dataField="DueDate" editorType="dxDateBox"
        [editorOptions]="{ value: null, width: '100%', displayFormat: 'dd-MM-yyyy',elementAttr:{ 'class': 'font-for-formlable' } }">
      </dxi-item>
      <dxi-item cssClass="font-for-formlable" dataField="DocumentStatus" [label]="{text: 'Doc Status'}"
        [editorOptions]="{ readOnly: true,elementAttr:{ 'class': 'font-for-formlable' } }"></dxi-item>
      <dxi-item cssClass="font-for-formlable" dataField="PaymentTerm" [label]="{text: 'Flow Completed'}"
        [editorOptions]="{ readOnly: true,elementAttr:{ 'class': 'font-for-formlable' } }"></dxi-item>
    </dxi-item>
    <dxi-item itemType="group">
      <dxi-item cssClass="font-for-formlable" dataField="BillToCustomer" [label]="{text: 'Customer'}"
        [editorOptions]="{ elementAttr:{ 'class': 'font-for-formlable' }, readOnly:true }"></dxi-item>
      <dxi-item cssClass="font-for-formlable" dataField="BillToName" [label]="{text: 'Name'}"
        [editorOptions]="{ elementAttr:{ 'class': 'font-for-formlable' }, readOnly:true }"></dxi-item>
      <dxi-item cssClass="font-for-formlable" dataField="BillToAddress" [label]="{text: 'Address'}"
        [editorOptions]="{ elementAttr:{ 'class': 'font-for-formlable' }, readOnly:true }"></dxi-item>
      <dxi-item cssClass="font-for-formlable" dataField="BillToAddress2" [label]="{text: 'Address 2'}"
        [editorOptions]="{ elementAttr:{ 'class': 'font-for-formlable' }, readOnly:true }"></dxi-item>
      <dxi-item cssClass="font-for-formlable" dataField="BillToCity" [label]="{text: 'City'}"
        [editorOptions]="{ elementAttr:{ 'class': 'font-for-formlable' }, readOnly:true }"></dxi-item>
      <dxi-item cssClass="font-for-formlable" dataField="BillToZip" [label]="{text: 'ZipCode'}"
        [editorOptions]="{ elementAttr:{ 'class': 'font-for-formlable' }, readOnly:true }"></dxi-item>
    </dxi-item>
    <dxi-item itemType="group">
      <dxi-item cssClass="font-for-formlable" dataField="Remark" [label]="{text: 'Remarks'}"
        [editorOptions]="{ elementAttr:{ 'class': 'font-for-formlable' } }">
      </dxi-item>
    </dxi-item>
  </dx-form>
</div>

<br>
<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-body font-for-formlable">
          <div class="row">
              <div class="col-8">
                <div id="form-container">
                  <dx-form id="SalesInvoiceOperation" itemType="group" [colCount]="2" accept-charset="UTF-8">
                    <dxi-item itemType="group" dataField="Line Operation">
                      <dx-select-box #selectBoxSI [dataSource]="LineOperations" [value]=""></dx-select-box>
                    </dxi-item>
                    <dxi-item itemType="group" [editorOptions]="{ elementAttr:{ 'class': 'font-for-formlable' } }">
                      <dx-button icon="spinright" type="default" text="GO" (onClick)="BNLineOperationsGo(selectBoxSI.text)">
                      </dx-button>
                    </dxi-item>
                  </dx-form>
                </div>
              </div>
            </div>
            <br>
        <dx-data-grid #gridContainer [columnAutoWidth]="true" id="gridContainer" [dataSource]="dataSource"
          [showBorders]="true" [allowColumnResizing]="true" (onInitNewRow)="getthelines()">
          <dxo-search-panel [visible]="true"></dxo-search-panel>
          <dxo-editing mode="row" [allowUpdating]="true" [allowDeleting]="true" [allowAdding]="true"
            [form]="{items: ['LineNo','Remark'], colCount:4}">
          </dxo-editing>
          <dxi-column dataField="LineNo" [allowSearch]="false" [visible]="false"></dxi-column>
          <dxi-column dataField="InvoiceNo" [allowSearch]="true" dataType="string"></dxi-column>
          <dxi-column dataField="DocumentDate" [allowSearch]="true" dataType="string"></dxi-column>
          <dxi-column dataField="DueDate" [allowSearch]="true" dataType="string"></dxi-column>
          <dxi-column dataField="Amount" dataType="number" [allowSearch]="false">
            <dxo-format type="fixedPoint" [precision]="2"></dxo-format>
          </dxi-column>
          <dxi-column dataField="Remark" [allowSearch]="true" dataType="string"></dxi-column>
          <dxo-summary>
            <dxi-total-item displayFormat="{0}" showInColumn="Amount" column="Amount" summaryType="sum"
              dataType="number">
            </dxi-total-item>
          </dxo-summary>
        </dx-data-grid>
      </div>
    </div>
  </div>

  <dx-popup class="popup" [width]="800" [height]="600" [showTitle]="true" title="Create Lines" [dragEnabled]="true"
    [closeOnOutsideClick]="true" [(visible)]="popupforlines">
    <div *dxTemplate="let data of 'content'">
      <div class="col-12">
        <div class="row">
          <br>
          <dx-data-grid #getlinesforgrid [columnAutoWidth]="true" [allowColumnResizing]="true"
            [dataSource]="dataSource2" [showBorders]="true">
            <dxo-header-filter [visible]="true" [allowSearch]="true"></dxo-header-filter>
            <dxo-paging [pageSize]="20"></dxo-paging>
            <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[5, 10, 20]" [showInfo]="true">
            </dxo-pager>
            <dxi-column dataField="DocumentNo"></dxi-column>
            <dxi-column dataField="DocumentDate"></dxi-column>
            <dxi-column dataField="CustCode"></dxi-column>
            <dxi-column dataField="DueDate"></dxi-column>
            <dxi-column dataField="Amount" dataType="number">
              <dxo-format type="fixedPoint" [precision]="2"></dxo-format>
            </dxi-column>
            <dxi-column dataField="Action" cellTemplate="cellTemplate" [allowEditing]="false" [allowSearch]="false">
            </dxi-column>
            <dxo-paging [pageSize]="12"></dxo-paging>
            <dxo-pager [showPageSizeSelector]="true" [allowedPageSizes]="[8, 12, 20]"></dxo-pager>
            <div *dxTemplate="let data of 'cellTemplate'">
              <dx-button type="default" text="ADD" (onClick)="addnewline(data)"></dx-button>
            </div>
          </dx-data-grid>
        </div>
        <br>
      </div>
    </div>
  </dx-popup>
</div>